version: '3.5'


services:
  crud-tasks:
    image: gabrielsoaresdev/crudtasklumen:latest
    container_name:  crud-tasks
    restart: always
    env_file:
      - stack.env
    ports:
    - "8005:8005"
    networks:
      - api-tasks-network
      - mysql-network
      - proxy-reverse-network
  nginx:
    image: nginx:alpine
    ports:
      - 85:85
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/conf.d/default.conf
      - ./public:/var/www/public
    depends_on:
      - crud-tasks
networks:
 api-tasks-network:
    name: api-tasks-network
    driver: bridge
 mysql-network:
   name: mysql-network
   external: true
 proxy-reverse-network:
   name: proxy-reverse-network
   external: true









